<div class="dashboard-container">
    <!-- Sidebar (hidden on mobile) -->
    <div class="sidebar" [class.open]="isMobileMenuOpen">
      <div class="sidebar-header">
        <h1 class="app-title">Splitwise</h1>
        <button class="close-menu-btn" (click)="toggleMobileMenu()" *ngIf="isMobileMenuOpen">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <nav class="sidebar-nav">
        <a class="nav-item active">
          <i class="fas fa-home"></i>
          <span>Dashboard</span>
        </a>
        <a class="nav-item">
          <i class="fas fa-receipt"></i>
          <span>Recent Activity</span>
        </a>
        <a class="nav-item">
          <i class="fas fa-users"></i>
          <span>All Groups</span>
        </a>
        <a class="nav-item">
          <i class="fas fa-user-friends"></i>
          <span>Friends</span>
        </a>
        <a class="nav-item">
          <i class="fas fa-chart-pie"></i>
          <span>Reports</span>
        </a>
      </nav>
      
      <div class="sidebar-groups">
        <h3>YOUR GROUPS</h3>
        <div class="group-list">
          <a *ngFor="let group of groups" class="group-item">
            <span class="group-icon">
              <i class="fas fa-users"></i>
            </span>
            <span class="group-name">{{ group.name }}</span>
          </a>
        </div>
      </div>
      
      <div class="sidebar-friends">
        <h3>FRIENDS</h3>
        <div class="friend-list">
          <a *ngFor="let friend of friends" class="friend-item">
            <img [src]="friend.photoUrl" alt="{{ friend.name }}" class="friend-avatar">
            <span class="friend-name">{{ friend.name }}</span>
            <span class="friend-balance" [class.positive]="friend.balance > 0" [class.negative]="friend.balance < 0">
              {{ friend.balance > 0 ? 'owes you' : 'you owe' }} ${{ friend.balance | number:'1.2-2' }}
            </span>
          </a>
        </div>
      </div>
    </div>
  
    <!-- Main Content -->
    <div class="main-content">
      <!-- Mobile Header -->
      <div class="mobile-header">
        <button class="menu-toggle" (click)="toggleMobileMenu()">
          <i class="fas fa-bars"></i>
        </button>
        <h1 class="app-title">Splitwise</h1>
        <button class="add-expense-btn-mobile" (click)="openExpenseModal()">
          <i class="fas fa-plus"></i>
        </button>
      </div>
  
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <div class="balance-summary">
          <div class="balance-card total" [class.positive]="totalBalance >= 0" [class.negative]="totalBalance < 0">
            <h3>Total Balance</h3>
            <p class="amount">${{ totalBalance | number:'1.2-2' }}</p>
          </div>
          <div class="balance-card owe">
            <h3>You Owe</h3>
            <p class="amount">${{ youOwe | number:'1.2-2' }}</p>
          </div>
          <div class="balance-card owed">
            <h3>You Are Owed</h3>
            <p class="amount">${{ youAreOwed | number:'1.2-2' }}</p>
          </div>
        </div>
        <button class="add-expense-btn" (click)="openExpenseModal()">
          <i class="fas fa-plus"></i> Add an expense
        </button>
      </div>
  
      <!-- Recent Activity -->
      <div class="recent-activity">
        <h2>Recent Activity</h2>
        <div class="expense-list">
          <div *ngFor="let expense of recentExpenses" class="expense-item">
            <div class="expense-date">
              {{ expense.date | date:'MMM d' }}
            </div>
            <div class="expense-details">
              <div class="expense-description">
                <h4>{{ expense.description }}</h4>
                <p *ngIf="expense.group">in <span class="group-tag">{{ expense.group }}</span></p>
              </div>
              <div class="expense-amount">
                <p class="amount">${{ expense.amount | number:'1.2-2' }}</p>
                <p class="paid-by">{{ expense.paidBy === 'You' ? 'You paid' : expense.paidBy + ' paid' }}</p>
              </div>
            </div>
            <div class="expense-participants">
              <p>Split between: {{ expense.participants.join(', ') }}</p>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Groups Summary -->
      <div class="groups-summary">
        <h2>Your Groups</h2>
        <div class="group-cards">
          <div *ngFor="let group of groups" class="group-card">
            <div class="group-card-header">
              <h3>{{ group.name }}</h3>
              <p>{{ group.members.length }} members</p>
            </div>
            <div class="group-card-body">
              <p class="group-total">Total expenses: ${{ group.totalExpenses | number:'1.2-2' }}</p>
              <button class="view-group-btn" [routerLink]="['/groups', group.id]">View Details</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Add Expense Modal -->
    <div class="modal-overlay" *ngIf="isExpenseModalOpen" (click)="closeExpenseModal()">
      <div class="expense-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Add an expense</h2>
          <button class="close-modal-btn" (click)="closeExpenseModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="expense-description">Description</label>
            <input type="text" id="expense-description" placeholder="What was this expense for?">
          </div>
          <div class="form-group">
            <label for="expense-amount">Amount</label>
            <div class="amount-input">
              <span class="currency-symbol">$</span>
              <input type="number" id="expense-amount" placeholder="0.00">
            </div>
          </div>
          <div class="form-group">
            <label>Paid by</label>
            <div class="paid-by-options">
              <button class="paid-by-option active">You</button>
              <button class="paid-by-option">Someone else</button>
            </div>
          </div>
          <div class="form-group">
            <label>Split options</label>
            <div class="split-options">
              <button class="split-option active">Equally</button>
              <button class="split-option">Unequally</button>
              <button class="split-option">By percentage</button>
              <button class="split-option">By shares</button>
            </div>
          </div>
          <div class="form-group">
            <label>Group or friends</label>
            <select class="group-select">
              <option value="">Select a group or friend</option>
              <optgroup label="Groups">
                <option *ngFor="let group of groups" [value]="'group-' + group.id">{{ group.name }}</option>
              </optgroup>
              <optgroup label="Friends">
                <option *ngFor="let friend of friends" [value]="'friend-' + friend.id">{{ friend.name }}</option>
              </optgroup>
            </select>
          </div>
          <div class="form-group">
            <label for="expense-date">Date</label>
            <input type="date" id="expense-date" [value]="currentDate">
          </div>
        </div>
        <div class="modal-footer">
          <button class="cancel-btn" (click)="closeExpenseModal()">Cancel</button>
          <button class="save-btn">Save</button>
        </div>
      </div>
    </div>
  </div>